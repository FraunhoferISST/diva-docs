(self.webpackChunkdiva_docs=self.webpackChunkdiva_docs||[]).push([[898],{5112:(e,t,o)=>{"use strict";o.r(t),o.d(t,{data:()=>n});const n={key:"v-172de82b",path:"/development/deployment/local.html",title:"Local development",lang:"en-US",frontmatter:{},excerpt:"",headers:[],filePathRelative:"development/deployment/local.md",git:{contributors:[]}}},8024:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>N});var n=o(6252);const a=(0,n.Wm)("h1",{id:"local-development"},[(0,n.Wm)("a",{class:"header-anchor",href:"#local-development"},"#"),(0,n.Uk)(" Local development")],-1),l=(0,n.Wm)("p",null,"In this chapter we will look at what is needed to develop existing services or create new ones locally on your own development machine. This guide is for the developers who want to actively contribute to the implementation of the system and assumes that the respective components must be run locally without Docker. Read this if you want to improve one of the existing components or add a new one.",-1),r={class:"custom-container tip"},s=(0,n.Wm)("p",{class:"custom-container-title"},"TIP",-1),c=(0,n.Uk)("Make sure to read the "),i={href:"/dev-docs/deployment/",target:"_blank",rel:"noopener noreferrer"},d=(0,n.Uk)("prerequisites"),m=(0,n.Uk)(" to know what do you need to be able to set up DIVA on your machine"),u=(0,n.Wm)("p",null,"DIVA consist of many components, each with it own requirements. All components are provided with corresponding readmes where you can find detailed descriptions of the requirements and execution instructions.",-1),h=(0,n.Uk)("In general, a common routine will look like this: check out the necessary repository, change to the right folder, install dependencies and start the component. While there are system components that can run completely independently, most of our "),p=(0,n.Uk)("core services"),k=(0,n.Uk)(" rely on Kafka or databases. For example "),v=(0,n.Uk)("Web client"),w=(0,n.Uk)(" relies on "),f=(0,n.Uk)("API Gateway"),y=(0,n.Uk)(", and the "),W=(0,n.Uk)("API Gateway"),g=(0,n.Uk)(" needs other services to be running. In order to be able to work properly with the client, other services have to operate as well. To avoid this problem, the necessary components such as Kafka, databases or other service can be run directly with Docker Compose. Therefore, we propose the following workflow for local development:"),b=(0,n.Wm)("li",null,[(0,n.Wm)("p",null,[(0,n.Uk)("We recommend you to specify a host name forwarding for Kafka. Please map "),(0,n.Wm)("code",null,"broker"),(0,n.Uk)(" to "),(0,n.Wm)("code",null,"localhost"),(0,n.Uk)(" in your "),(0,n.Wm)("code",null,"/etc/hosts"),(0,n.Uk)(" file:")]),(0,n.Wm)("div",{class:"language-text ext-text"},[(0,n.Wm)("pre",{class:"language-text"},[(0,n.Wm)("code",null,"127.0.0.1 localhost broker\n")])])],-1),U=(0,n.Uk)("Spin up the system with Docker. Read our guide for "),x=(0,n.Uk)("Docker deployment"),I=(0,n.Uk)(" for further information"),_=(0,n.Wm)("div",{class:"language-bash ext-sh"},[(0,n.Wm)("pre",{class:"language-bash"},[(0,n.Wm)("code",null,[(0,n.Wm)("span",{class:"token builtin class-name"},"cd"),(0,n.Uk)(" docker\n./up_core.sh\n")])])],-1),D=(0,n.Wm)("blockquote",null,[(0,n.Wm)("p",null,"It is not required to boot the complete system. If you are already familiar with the DIVA architecture, you can start only these components that are required by corresponding dependent component")],-1),A=(0,n.uE)('<li><p>Stop the component you want to work on. For example, if you want to develop on Resource Management, stop the corresponding container</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> docker\ndocker-compose stop resource-management\n</code></pre></div></li><li><p>Now you can execute the service locally</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> code/services/resource-management\n<span class="token function">npm</span> i\n<span class="token function">npm</span> run dev\n</code></pre></div></li>',2),V=(0,n.Wm)("div",{class:"custom-container warning"},[(0,n.Wm)("p",{class:"custom-container-title"},"WARNING"),(0,n.Wm)("p",null,"Due to docker network configuration not all services can talk to each other service. You might also need to start other services locally without docker!")],-1),L={class:"custom-container warning"},q=(0,n.Wm)("p",{class:"custom-container-title"},"Elasticsearch Warning",-1),P=(0,n.Uk)("Elasticsearch uses a mmapfs directory by default to store its indices. The default operating system limits on mmap counts is likely to be too low, which may result in out of memory exceptions. Please configure your machine like described "),R={href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/vm-max-map-count.html",target:"_blank",rel:"noopener noreferrer"},S=(0,n.Uk)("here"),T=(0,n.Wm)("p",null,"This is the general procedure, the details in the steps may vary depending on the specific component. From this point on, you should learn more about DIVA architecture, know what to consider when developing services and other components, and how to containerize the software.",-1),C={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},F=(0,n.Uk)(" Learn DIVA architecture to understand components relations "),E=(0,n.Uk)(" Learn the core principles of our core and FaaS Services "),G=(0,n.Uk)(" Build our Vue based web application "),K=(0,n.Uk)(" Develop helpful tools for the every day life with DIVA "),N={render:function(e,t){const o=(0,n.up)("OutboundLink"),N=(0,n.up)("RouterLink"),M=(0,n.up)("CardLink");return(0,n.wg)(),(0,n.j4)(n.HY,null,[a,l,(0,n.Wm)("div",r,[s,(0,n.Wm)("p",null,[c,(0,n.Wm)("a",i,[d,(0,n.Wm)(o)]),m])]),u,(0,n.Wm)("p",null,[h,(0,n.Wm)(N,{to:"/development/architecture/services.html#core-services"},{default:(0,n.w5)((()=>[p])),_:1}),k,(0,n.Wm)(N,{to:"/development/architecture/web-client.html"},{default:(0,n.w5)((()=>[v])),_:1}),w,(0,n.Wm)(N,{to:"/development/architecture/gateway.html"},{default:(0,n.w5)((()=>[f])),_:1}),y,(0,n.Wm)(N,{to:"/development/architecture/gateway.html"},{default:(0,n.w5)((()=>[W])),_:1}),g]),(0,n.Wm)("ol",null,[b,(0,n.Wm)("li",null,[(0,n.Wm)("p",null,[U,(0,n.Wm)(N,{to:"/development/deployment/docker.html"},{default:(0,n.w5)((()=>[x])),_:1}),I]),_,D]),A]),V,(0,n.Wm)("div",L,[q,(0,n.Wm)("p",null,[P,(0,n.Wm)("a",R,[S,(0,n.Wm)(o)])])]),T,(0,n.Wm)("div",C,[(0,n.Wm)("div",null,[(0,n.Wm)(M,{link:"/dev-docs/architecture",title:"Architecture overview"},{default:(0,n.w5)((()=>[F])),_:1})]),(0,n.Wm)("div",null,[(0,n.Wm)(M,{class:"fill",link:"/dev-docs/architecture/services.html#services",title:"Services development"},{default:(0,n.w5)((()=>[E])),_:1})]),(0,n.Wm)("div",null,[(0,n.Wm)(M,{link:"/dev-docs/architecture/web-client.html",title:"Web client"},{default:(0,n.w5)((()=>[G])),_:1})]),(0,n.Wm)("div",null,[(0,n.Wm)(M,{class:"fill",link:"/dev-docs/architecture/tooling.html#services",title:"DIVA tools"},{default:(0,n.w5)((()=>[K])),_:1})])])],64)}}}}]);